--- 
layout: default 
title: Publications 
notitle: true 
---

                
<div class="row">
        <div class="col-8">
                <div class="form-group">
                                <label for="inputAddress">Filter articles</label>
                                <input type="text" class="form-control" id="search" placeholder="Search">
                </div>    
        </div>   
        <div class="col-4">
                        <div class="form-group">
                                        <label for="inputAddress">Filter by year</label>
                                        <input type="number" class="form-control" id="year" placeholder="Search">
                        </div>    
                </div>           
</div>

<div id="articles">
</div>
<script>
var nData;
$(document).on('keyup paste', 'input[id^=search]', function() {
        refreshData(nData);
});
$(document).on('keyup paste', 'input[id^=year]', function() {
        refreshData(nData);
});
$.get(
    "bib/jsonBib.json",
    function(data) {
            nData = data;
            refreshData(data);
    }
);

function refreshData (data) {
        document.getElementById('articles').innerHTML="";
        data.forEach(article => {

                searchText = document.getElementById('search').value;
                yearText = document.getElementById('year').value;
                textFilter = false;
                yearFilter = false;

                if(searchText && searchText != '' && searchText != ' ')
                {
                        textFilter = true;
                }
                if(yearText && yearText != '' && yearText != ' ')
                {
                        yearFilter = true;
                }
                
                if((textFilter == false && yearFilter == false) ||
                (yearFilter && yearText == article['year'])||
                (textFilter && 
                ((article['title'] && article['title'].includes(searchText))
                || (article['author'] && article['author'].includes(searchText))
                || (article['container-title'] && article['container-title'].includes(searchText))
                || (article['issued'] && article['issued']['date-parts'] && article['issued']['date-parts'].includes(searchText))
                ))) {
                var nDiv = document.createElement('div');
                nDiv.classList.add('card', 'card-header', 'bg-faded', 'customBib');
                nDiv.innerHTML = createArticleText(article);
                if(article['URL'])
                {

                if(article['DOI']) {
                        var doi = document.createElement('a');
                        doi.classList.add('customBadge');
                        doi.innerHTML = "doi: "+article['DOI'];
                        doi.href=article['URL'];

                        nDiv.appendChild(doi);
                }
                else {
                var link = document.createElement('a');
                link.innerHTML = "URL";
                link.href=article.url;
                nDiv.appendChild(link);
                }
                }

                if(article['DOI'] && !article['URL'])
                {
                        var doi = document.createElement('a');
                        doi.classList.add('customBadge');
                        doi.innerHTML = "doi: "+article['DOI'];
                        nDiv.appendChild(doi);
                }
                
                

                document.getElementById('articles').appendChild(nDiv);
                }
            });
}

function createArticleText(article) {
        var text = '';
        if(article['title']) {
                text = text + '<h5>'+article['title']+'</h5>';
        }

        if(article ['author']) {
                var authorText = '';
                var authors = article['author'];
                authors.forEach((pAuth, index) => {
                        authorText = authorText + pAuth['given'] + ' ' + pAuth['family'];
                        if(index < authors.length-2) {
                                authorText = authorText + ', ';
                        }
                        else if(index < authors.length-1) {
                                authorText = authorText + ' and ';
                        }
        })
        text = text + authorText + ", ";
        }

        

        if(article['container-title']) {
                text = text + "<i>" + article['container-title'] + "</i>";
        }

        if(article['issued']) {
                text = text + article['issued']['date-parts'];
        }

return text;
}
</script>
